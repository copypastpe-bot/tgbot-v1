cat > README.md <<'MD'
# tgbot-v1

–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π Telegram-–±–æ—Ç –¥–ª—è —É—á—ë—Ç–∞ –∑–∞–∫–∞–∑–æ–≤, –±–æ–Ω—É—Å–æ–≤ –∏ —Ä–∞—Å—á—ë—Ç–∞ –ó–ü –º–∞—Å—Ç–µ—Ä–æ–≤.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ (MVP)
- –ö–Ω–æ–ø–∫–∞ **¬´üßæ –Ø –í–´–ü–û–õ–ù–ò–õ –ó–ê–ö–ê–ó¬ª** ‚Äî –ø–æ—à–∞–≥–æ–≤—ã–π –≤–≤–æ–¥:
  - –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∫–ª–∏–µ–Ω—Ç–∞
  - –∏–º—è (–µ—Å–ª–∏ –Ω–æ–≤–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞ –Ω–µ—Ç –≤ –ë–î)
  - —Å—É–º–º–∞ —á–µ–∫–∞ –∏ –¥–æ–ø. –ø—Ä–æ–¥–∞–∂–∏
  - —Å–ø–∏—Å–∞–Ω–∏–µ –±–æ–Ω—É—Å–æ–≤ (–∞–≤—Ç–æ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è)
  - —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã
  - –î–† (–µ—Å–ª–∏ –∏–∑–≤–µ—Å—Ç–Ω–æ)
  - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
- –ê–≤—Ç–æ–∑–∞–ø–∏—Å—å –≤ –ë–î:
  - `clients`, `orders`, `bonus_transactions`, `cashbook_entries`, `payroll_items`
  - –∞–≤—Ç–æ–ø–æ–¥—Å—á—ë—Ç –Ω–∞—á–∏—Å–ª–µ–Ω–Ω—ã—Ö/—Å–ø–∏—Å–∞–Ω–Ω—ã—Ö –±–æ–Ω—É—Å–æ–≤
  - —Ä–∞—Å—á—ë—Ç –ó–ü –º–∞—Å—Ç–µ—Ä–∞ (–±–∞–∑–∞ + –±–µ–Ω–∑–∏–Ω + –¥–æ–ø—ã)
- –ü–æ–∏—Å–∫ –∫–ª–∏–µ–Ω—Ç–∞: `/find +7XXXXXXXXXX` –∏–ª–∏ `9XXXXXXXXX`
- –ê–¥–º–∏–Ω-–∫–æ–º–∞–Ω–¥—ã:
  - `/list_masters` ‚Äî —Å–ø–∏—Å–æ–∫ –º–∞—Å—Ç–µ—Ä–æ–≤/–∞–¥–º–∏–Ω–æ–≤
  - `/add_master <tg_user_id>` ‚Äî –≤—ã–¥–∞—Ç—å —Ä–æ–ª—å –º–∞—Å—Ç–µ—Ä–∞
  - `/remove_master <tg_user_id>` ‚Äî –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –º–∞—Å—Ç–µ—Ä–∞
  - `/payroll YYYY-MM` ‚Äî –æ—Ç—á—ë—Ç –ø–æ –ó–ü –∑–∞ –º–µ—Å—è—Ü

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- Python 3.10+, [aiogram 3](https://docs.aiogram.dev/)
- PostgreSQL 14+, `asyncpg`
- systemd service

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env)
- `WAHELP_WEBHOOK_HOST` ‚Äî –∞–¥—Ä–µ—Å, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è http-—Å–µ—Ä–≤–µ—Ä –≤–µ–±—Ö—É–∫–∞ Wahelp (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `0.0.0.0`).
- `WAHELP_WEBHOOK_PORT` ‚Äî –ø–æ—Ä—Ç –≤–µ–±—Ö—É–∫–∞. –ï—Å–ª–∏ `0`, —Å–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è.
- `WAHELP_WEBHOOK_TOKEN` ‚Äî –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π —Å–µ–∫—Ä–µ—Ç. –ü–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ –µ–≥–æ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ `X-Wahelp-Token` –∏–ª–∏ –∫–∞–∫ `?token=...` –ø—Ä–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –≤–µ–±—Ö—É–∫–∞ –≤ Wahelp.

## –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- –ü—Ä–∞–≤–∏–ª–∞ –ª–µ–∂–∞—Ç –≤ `docs/notification_rules.json`. –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ñ–∞–π–ª–æ–≤ —à–∞–±–ª–æ–Ω–æ–≤ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å –±–æ—Ç–∞ –Ω–µ –Ω—É–∂–Ω–æ ‚Äî –ø—Ä–∞–≤–∏–ª–∞ –ø–µ—Ä–µ—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ.
- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–æ–±—ã—Ç–∏–π –≤ –∫–æ–¥–µ —Ñ–æ—Ä–º–∏—Ä—É—é—Ç—Å—è –∑–∞–ø–∏—Å–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ `notification_outbox`. –§–æ–Ω–æ–≤–æ–π –≤–æ—Ä–∫–µ—Ä (`NotificationWorker`) –∑–∞–±–∏—Ä–∞–µ—Ç –≥–æ—Ç–æ–≤—ã–µ –∑–∞–¥–∞—á–∫–∏ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–µ–∫—Å—Ç —á–µ—Ä–µ–∑ Wahelp —Å —É—á—ë—Ç–æ–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤.
- –ö–∞–∂–¥–æ–µ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è –≤ `notification_messages`. –°—Ç–∞—Ç—É—Å—ã (`sent`, `delivered`, `read`, `failed`) –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ –≤–µ–±—Ö—É–∫ `/wahelp/webhook`.
- –í–µ–±—Ö—É–∫ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ Wahelp –Ω–∞ URL `https://<host>:<port>/wahelp/webhook?token=...` (—Å–º. –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤—ã—à–µ). –ü—Ä–∏ –ø—Ä–æ—á—Ç–µ–Ω–∏–∏ –∫–ª–∏–µ–Ω—Ç–æ–º —Å–æ–æ–±—â–µ–Ω–∏—è –≤ Telegram –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–º–µ–Ω—è–µ—Ç—Å—è –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã–π WhatsApp-follow-up.
